<div class="container py-4">
  <div class="row gx-4 mb-3">
    <div class="col-12 d-flex justify-content-end">
      <button mat-raised-button color="primary" routerLink="/new/product">
        Crear Nuevo Producto
      </button>
    </div>
  </div>

  <!-- Indicador de búsqueda activa -->
  <div *ngIf="currentSearchTerm" class="mb-3">
    <div class="alert alert-info d-flex align-items-center">
      <span class="material-icons me-2">search</span>
      <span>
        Resultados para: <strong>"{{ currentSearchTerm }}"</strong>
        <small class="ms-2 text-muted"
          >({{ products.length }} producto{{ products.length !== 1 ? 's' : '' }}
          encontrado{{ products.length !== 1 ? 's' : '' }})</small
        >
      </span>
      <button
        type="button"
        class="btn-close ms-auto"
        (click)="clearSearch()"
        aria-label="Limpiar búsqueda"
      ></button>
    </div>
  </div>

  <div class="row gx-4">
    <!-- Sidebar de categorías -->
    <aside class="col-12 col-md-3 mb-4">
      <app-categories
        (categoriesChanged)="onCategoriesChanged($event)"
      ></app-categories>
    </aside>

    <!-- Productos -->
    <section class="col-12 col-md-9">
      <!-- Lista de productos -->
      <div
        *ngIf="products.length === 0 && currentSearchTerm"
        class="text-center py-5"
      >
        <span class="material-icons display-1 text-muted">search_off</span>
        <h3 class="mt-3 text-muted">No se encontraron productos</h3>
        <p class="text-muted">
          No hay productos que coincidan con tu búsqueda "{{ currentSearchTerm
          }}"
        </p>
        <button class="btn btn-primary" (click)="clearSearch()">
          <span class="material-icons me-2">refresh</span>
          Ver todos los productos
        </button>
      </div>

      <app-product-list *ngIf="products.length > 0" [products]="products">
      </app-product-list>
    </section>
  </div>
</div>
